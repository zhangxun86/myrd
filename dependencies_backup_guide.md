# ä¾èµ–åŒ…å¤‡ä»½å’Œåˆ†å‘æŒ‡å—

## ðŸ“¦ ä¾èµ–åŒ…ç®¡ç†ç­–ç•¥

### å½“å‰ä¾èµ–åŒ…çŠ¶æ€
- **å®Œæ•´ä¾èµ–åŒ…**ï¼šrustdesk-deps-20250913.tar.gz
- **å¤§å°**ï¼šçº¦ 6GB
- **å†…å®¹**ï¼šæ‰€æœ‰æž„å»ºæ‰€éœ€çš„ä¾èµ–æ–‡ä»¶
- **å¤‡ä»½ä½ç½®**ï¼š198.11.178.210:/root/

---

## ðŸŽ¯ ä¸ºæ–°åŒäº‹åˆ›å»ºä¾èµ–åŒ…ä¸‹è½½æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šSFTP æœåŠ¡å™¨ä¸‹è½½ï¼ˆæŽ¨èï¼‰

æ–°åŒäº‹å¯ä»¥ç›´æŽ¥ä»Žå¤‡ä»½æœåŠ¡å™¨ä¸‹è½½ï¼š

```bash
# åœ¨æ–°æœåŠ¡å™¨ä¸Šåˆ›å»ºé¡¹ç›®ç›®å½•
cd /root/rustdesk/myrd

# ä½¿ç”¨ SFTP ä¸‹è½½ä¾èµ–åŒ…
sftp root@198.11.178.210
# è¾“å…¥å¯†ç ï¼šTb123456
get /root/rustdesk-deps-20250913.tar.gz
exit

# è§£åŽ‹ä¾èµ–åŒ…
tar -xzf rustdesk-deps-20250913.tar.gz

# è®¾ç½®æ­£ç¡®çš„æƒé™
chown -R root:root /root/rustdesk
chmod -R 755 /root/rustdesk
```

### æ–¹æ¡ˆäºŒï¼šåˆ›å»º HTTP ä¸‹è½½æœåŠ¡

æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æ–‡ä»¶æœåŠ¡ï¼š

```bash
# åˆ›å»ºå…±äº«ç›®å½•
mkdir -p /root/shared-deps
cp /root/rustdesk-deps-20250913.tar.gz /root/shared-deps/

# å¯åŠ¨ç®€å•çš„ HTTP æœåŠ¡å™¨
cd /root/shared-deps
python3 -m http.server 8080

# æ–°åŒäº‹å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸‹è½½
# wget http://[æœåŠ¡å™¨IP]:8080/rustdesk-deps-20250913.tar.gz
```

### æ–¹æ¡ˆä¸‰ï¼šäº‘å­˜å‚¨ä¸Šä¼ 

å¯ä»¥å°†ä¾èµ–åŒ…ä¸Šä¼ åˆ°äº‘å­˜å‚¨æœåŠ¡ï¼š

```bash
# ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼ˆéœ€è¦æ ¹æ®å…·ä½“æœåŠ¡é…ç½®ï¼‰
# ç¤ºä¾‹ï¼šä¸Šä¼ åˆ° AWS S3, Google Cloud, æˆ–é˜¿é‡Œäº‘ OSS
# ç„¶åŽæä¾›ä¸‹è½½é“¾æŽ¥ç»™æ–°åŒäº‹
```

---

## ðŸ“‹ ä¾èµ–åŒ…å†…å®¹è¯¦æƒ…

### åŒ…å«çš„å…³é”®ä¾èµ–
```
rustdesk-deps-20250913.tar.gz åŒ…å«ï¼š

1. Flutter ç›¸å…³ï¼š
   - ~/.pub-cache/           # Pub åŒ…ç¼“å­˜
   - flutter SDK æ–‡ä»¶
   - dart åŒ…ä¾èµ–

2. Rust ç›¸å…³ï¼š
   - ~/.cargo/registry/      # Cargo æ³¨å†Œè¡¨ç¼“å­˜
   - target/ ç¼–è¯‘è¾“å‡º
   - ç¬¬ä¸‰æ–¹ crate ä¾èµ–

3. Android ç›¸å…³ï¼š
   - Android SDK ç»„ä»¶
   - NDK å·¥å…·é“¾
   - Gradle ç¼“å­˜

4. ç³»ç»Ÿåº“ï¼š
   - ç¼–è¯‘å·¥å…·é“¾
   - é“¾æŽ¥åº“æ–‡ä»¶
```

### è§£åŽ‹åŽçš„ç›®å½•ç»“æž„
```
è§£åŽ‹åŽåº”è¯¥å¾—åˆ°ï¼š
â”œâ”€â”€ .cargo/              # Rust åŒ…ç®¡ç†å™¨ç¼“å­˜
â”œâ”€â”€ .pub-cache/          # Flutter/Dart åŒ…ç¼“å­˜  
â”œâ”€â”€ android-sdk/         # Android SDK
â”œâ”€â”€ flutter/             # Flutter SDK
â”œâ”€â”€ gradle-cache/        # Gradle æž„å»ºç¼“å­˜
â””â”€â”€ system-libs/         # ç³»ç»Ÿä¾èµ–åº“
```

---

## ðŸ”§ æ–°åŒäº‹å¿«é€ŸçŽ¯å¢ƒæ­å»º

### ä½¿ç”¨ä¾èµ–åŒ…çš„å®Œæ•´æµç¨‹

```bash
# 1. ç³»ç»Ÿå‡†å¤‡
sudo yum update -y
sudo yum install -y wget curl git unzip vim

# 2. ä¸‹è½½é¡¹ç›®ä»£ç 
cd /root/rustdesk
git clone https://github.com/zhangxun86/myrd.git
cd myrd

# 3. ä¸‹è½½ä¾èµ–åŒ…
sftp root@198.11.178.210
get /root/rustdesk-deps-20250913.tar.gz
exit

# 4. è§£åŽ‹å¹¶é…ç½®ä¾èµ–
tar -xzf rustdesk-deps-20250913.tar.gz

# 5. è®¾ç½®çŽ¯å¢ƒå˜é‡
cat >> ~/.bashrc << 'EOF'
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
export ANDROID_HOME=/root/android-sdk  
export ANDROID_SDK_ROOT=/root/android-sdk
export PATH="/root/flutter/bin:$PATH"
export PATH="$JAVA_HOME/bin:$PATH"
export PATH="$ANDROID_HOME/cmdline-tools/latest/bin:$PATH"
export PATH="$ANDROID_HOME/platform-tools:$PATH"
EOF

source ~/.bashrc

# 6. éªŒè¯çŽ¯å¢ƒ
java -version
flutter doctor
cargo --version

# 7. æž„å»ºé¡¹ç›®
cd flutter
flutter build apk --release --no-shrink --build-name=1.4.2 --build-number=60
```

---

## âš ï¸ ä¾èµ–åŒ…ä½¿ç”¨æ³¨æ„äº‹é¡¹

### å…³é”®è­¦å‘Š
1. **ç‰ˆæœ¬å…¼å®¹æ€§**ï¼šä¾èµ–åŒ…ä¸Žç‰¹å®šç‰ˆæœ¬ç»‘å®šï¼Œä¸è¦éšæ„å‡çº§
2. **è·¯å¾„ä¾èµ–**ï¼šæŸäº›å·¥å…·å¯èƒ½åŒ…å«ç»å¯¹è·¯å¾„ï¼Œéœ€è¦è°ƒæ•´
3. **æƒé™é—®é¢˜**ï¼šè§£åŽ‹åŽå¿…é¡»è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
4. **çŽ¯å¢ƒå˜é‡**ï¼šå¿…é¡»æ­£ç¡®é…ç½®æ‰€æœ‰å¿…è¦çš„çŽ¯å¢ƒå˜é‡

### æ•…éšœæŽ’æŸ¥
```bash
# å¦‚æžœé‡åˆ°è·¯å¾„é—®é¢˜ï¼Œæ£€æŸ¥å¹¶ä¿®å¤ï¼š
find /root -name "*.sh" -exec sed -i 's|/old/path|/new/path|g' {} \;

# å¦‚æžœé‡åˆ°æƒé™é—®é¢˜ï¼š
chmod +x /root/flutter/bin/flutter
chmod +x /root/android-sdk/cmdline-tools/latest/bin/*

# å¦‚æžœé‡åˆ°åº“é“¾æŽ¥é—®é¢˜ï¼š
ldconfig
export LD_LIBRARY_PATH="/usr/local/lib:$LD_LIBRARY_PATH"
```

---

## ðŸ”„ ä¾èµ–åŒ…æ›´æ–°ç­–ç•¥

### ä½•æ—¶éœ€è¦æ›´æ–°ä¾èµ–åŒ…
- Flutter æˆ– Rust ç‰ˆæœ¬å‡çº§æ—¶
- æ·»åŠ æ–°çš„ç¬¬ä¸‰æ–¹åº“æ—¶  
- Android SDK æˆ– NDK ç‰ˆæœ¬æ›´æ–°æ—¶
- ç³»ç»ŸçŽ¯å¢ƒå‘ç”Ÿé‡å¤§å˜åŒ–æ—¶

### åˆ›å»ºæ–°çš„ä¾èµ–åŒ…
```bash
# åœ¨å½“å‰å·¥ä½œçŽ¯å¢ƒä¸­åˆ›å»ºæ–°çš„ä¾èµ–åŒ…
cd /root

# æ‰“åŒ…æ‰€æœ‰ç›¸å…³ä¾èµ–
tar -czf rustdesk-deps-$(date +%Y%m%d).tar.gz \
    .cargo/ \
    .pub-cache/ \
    android-sdk/ \
    flutter/ \
    rustdesk/myrd/target/

# ä¸Šä¼ åˆ°å¤‡ä»½æœåŠ¡å™¨
scp rustdesk-deps-$(date +%Y%m%d).tar.gz root@198.11.178.210:/root/
```

---

## ðŸ“Š ä¾èµ–åŒ…å¤§å°ä¼˜åŒ–

### å½“å‰åŒ…å¤§å°åˆ†æž
```
æ€»å¤§å°ï¼š6GB
â”œâ”€â”€ Flutter/Dart ç¼“å­˜: ~2GB
â”œâ”€â”€ Rust ç¼–è¯‘ç¼“å­˜: ~2GB  
â”œâ”€â”€ Android SDK: ~1.5GB
â””â”€â”€ å…¶ä»–å·¥å…·: ~0.5GB
```

### ä¼˜åŒ–å»ºè®®
1. **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤ä¸å¿…è¦çš„ä¸­é—´æ–‡ä»¶
2. **åˆ†å±‚æ‰“åŒ…**ï¼šåŸºç¡€çŽ¯å¢ƒ + é¡¹ç›®ç‰¹å®šä¾èµ–
3. **åŽ‹ç¼©ä¼˜åŒ–**ï¼šä½¿ç”¨æ›´é«˜åŽ‹ç¼©çŽ‡
4. **å¢žé‡æ›´æ–°**ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†

---

## ðŸŒ å›½é™…åŒ–éƒ¨ç½²è€ƒè™‘

### ç¾Žå›½æœåŠ¡å™¨ä¼˜åŠ¿
- **ç½‘ç»œç›´è¿ž**ï¼šæ— éœ€ä»£ç†é…ç½®
- **ä¸‹è½½é€Ÿåº¦**ï¼šè®¿é—® GitHubã€Google æœåŠ¡æ›´å¿«
- **æ—¶åŒºä¸€è‡´**ï¼šä¾¿äºŽå›½é™…å›¢é˜Ÿåä½œ

### å¤šåœ°åŒºéƒ¨ç½²å»ºè®®
```bash
# å¯ä»¥åœ¨å¤šä¸ªåœ°åŒºåˆ›å»ºä¾èµ–åŒ…é•œåƒ
# ç¾Žå›½ï¼š198.11.178.210 (ä¸»)
# æ¬§æ´²ï¼š[å¤‡ç”¨æœåŠ¡å™¨] (é•œåƒ)  
# äºšæ´²ï¼š[å¤‡ç”¨æœåŠ¡å™¨] (é•œåƒ)
```

---

**ä¾èµ–åŒ…ç®¡ç†æ€»ç»“ï¼šé€šè¿‡å®Œæ•´çš„ä¾èµ–åŒ…å¤‡ä»½ï¼Œæ–°åŒäº‹å¯ä»¥åœ¨ä»»ä½•æ–°æœåŠ¡å™¨ä¸Šå¿«é€Ÿæ­å»ºå¼€å‘çŽ¯å¢ƒï¼Œé¿å…ç½‘ç»œé—®é¢˜å’Œç‰ˆæœ¬å†²çªã€‚**