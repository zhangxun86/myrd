# ä¾èµ–åŒ…å¤‡ä»½å’Œåˆ†å‘æŒ‡å—

## ðŸ“¦ ä¾èµ–åŒ…ç®¡ç†æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜ŽRustDesk Androidé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–åŒ…ç®¡ç†æ–¹æ¡ˆï¼Œç¡®ä¿æ–°åŒäº‹èƒ½å¤Ÿå¿«é€ŸèŽ·å–å’Œé…ç½®æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ã€‚

---

## ðŸŽ¯ ä¾èµ–åŒ…åˆ†å‘æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šå®Œæ•´é¡¹ç›®åŽ‹ç¼©åŒ… (æŽ¨èâ­â­â­â­â­)
**åŽ‹ç¼©åŒ…ä¿¡æ¯**:
- æ–‡ä»¶å: `myrd-project-20250914.tar.gz`
- å¤§å°: 26.8MB
- ä½ç½®: `/root/rustdesk/myrd-project-20250914.tar.gz`
- åŒ…å«å†…å®¹: å®Œæ•´æºç  + æ‰€æœ‰ä¾èµ– + ç¼–è¯‘äº§ç‰©

**ä½¿ç”¨æ–¹æ³•**:
```bash
# ä¸‹è½½å¹¶è§£åŽ‹é¡¹ç›®åŒ…
wget [é¡¹ç›®åŒ…ä¸‹è½½é“¾æŽ¥]
tar -xzf myrd-project-20250914.tar.gz
cd myrd

# ç›´æŽ¥è¿›å…¥æž„å»ºæµç¨‹ï¼Œæ— éœ€é‡æ–°ä¸‹è½½ä¾èµ–
flutter pub get  # å¿«é€Ÿå®Œæˆï¼Œå› ä¸ºä¾èµ–å·²ç¼“å­˜
cargo build --release --target aarch64-linux-android
```

**ä¼˜åŠ¿**:
- âœ… åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— ç½‘ç»œé—®é¢˜
- âœ… ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œæ— å…¼å®¹æ€§é—®é¢˜  
- âœ… è§£åŽ‹å³ç”¨ï¼Œå¤§å¤§å‡å°‘é…ç½®æ—¶é—´
- âœ… é€‚åˆç¦»çº¿çŽ¯å¢ƒæˆ–ç½‘ç»œå—é™çŽ¯å¢ƒ

### æ–¹æ¡ˆäºŒï¼šGitHubä»“åº“ + ä¾èµ–è‡ªåŠ¨èŽ·å–
**ä»“åº“ä¿¡æ¯**:
- åœ°å€: https://github.com/zhangxun86/myrd.git
- è´¦å·: zhangxun86
- è®¿é—®æ–¹å¼: å…¬å¼€ä»“åº“

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/zhangxun86/myrd.git
cd myrd

# æŒ‰ç…§æŒ‡å—å®‰è£…çŽ¯å¢ƒå’Œä¾èµ–
# è¯¦è§ã€Šæ–°åŒäº‹é¡¹ç›®æŽ¥æ‰‹å®Œæ•´æŒ‡å—.mdã€‹
```

**ä¼˜åŠ¿**:
- âœ… å§‹ç»ˆèŽ·å–æœ€æ–°ä»£ç ç‰ˆæœ¬
- âœ… æ”¯æŒç‰ˆæœ¬æŽ§åˆ¶å’Œåä½œå¼€å‘
- âœ… æ–‡ä»¶è¾ƒå°ï¼Œä¸‹è½½å¿«é€Ÿ

**åŠ£åŠ¿**:
- âŒ éœ€è¦é‡æ–°ä¸‹è½½æ‰€æœ‰ä¾èµ–åŒ…
- âŒ å¯èƒ½é‡åˆ°ç½‘ç»œæˆ–ç‰ˆæœ¬å…¼å®¹é—®é¢˜

---

## ðŸ“‹ ä¾èµ–åŒ…è¯¦ç»†æ¸…å•

### Flutterä¾èµ–åŒ… (37ä¸ª)
**æ ¸å¿ƒæ¡†æž¶ä¾èµ–**:
```yaml
flutter: sdk
flutter_localizations: sdk
flutter_rust_bridge: "1.80.1"
ffi: ^2.1.0
```

**UIå’ŒåŠŸèƒ½ä¾èµ–**:
```yaml
provider: ^6.0.5
tuple: ^2.0.0
wakelock_plus: ^1.1.3
package_info_plus: ^4.2.0
url_launcher: ^6.3.1
toggle_switch: ^2.1.0
settings_ui: ^2.0.2
flutter_breadcrumb: ^1.0.1
http: ^1.1.0
image_picker: ^1.1.2
image: ^4.0.17
back_button_interceptor: ^6.0.1
```

**ç‰¹æ®ŠGitä¾èµ– (å…³é”®ï¼)**:
```yaml
dash_chat_2:
  git:
    url: https://github.com/rustdesk-org/Dash-Chat-2

window_manager:
  git:
    url: https://github.com/rustdesk-org/window_manager

desktop_multi_window:
  git:
    url: https://github.com/rustdesk-org/rustdesk_desktop_multi_window

uni_links:
  git:
    url: https://github.com/rustdesk-org/uni_links
    path: uni_links
    ref: f416118d843a7e9ed117c7bb7bdc2deda5a9e86f

texture_rgba_renderer:
  git:
    url: https://github.com/rustdesk-org/flutter_texture_rgba_renderer
    ref: 42797e0f03141dc2b585f76c64a13974508058b4

flutter_gpu_texture_renderer:
  git:
    url: https://github.com/rustdesk-org/flutter_gpu_texture_renderer
    ref: 08a471bb8ceccdd50483c81cdfa8b81b07b14b87

dynamic_layouts:
  git:
    url: https://github.com/rustdesk-org/dynamic_layouts.git
    ref: 24cb88413fa5181d949ddacbb30a65d5c459e7d9

window_size:
  git:
    url: https://github.com/google/flutter-desktop-embedding.git
    path: plugins/window_size
    ref: eb3964990cf19629c89ff8cb4a37640c7b3d5601
```

### Rustä¾èµ–åŒ… (Cargo.toml)
**æ ¸å¿ƒä¾èµ–**:
- `tokio` - å¼‚æ­¥è¿è¡Œæ—¶
- `serde` - åºåˆ—åŒ–/ååºåˆ—åŒ–
- `flutter_rust_bridge` - Flutteræ¡¥æŽ¥
- `uuid` - UUIDç”Ÿæˆ
- `anyhow` - é”™è¯¯å¤„ç†

**å¹³å°ç‰¹å®šä¾èµ–**:
- Android NDKç›¸å…³crate
- JNIæ¡¥æŽ¥åº“
- ç³»ç»Ÿè°ƒç”¨ç›¸å…³åº“

---

## ðŸŒ ç½‘ç»œé…ç½®å’Œé•œåƒæº

### ä¸­å›½å¤§é™†ç½‘ç»œä¼˜åŒ–é…ç½®
**Flutteré•œåƒæº**:
```bash
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
```

**Rusté•œåƒæºé…ç½®**:
```bash
mkdir -p ~/.cargo
cat > ~/.cargo/config.toml << 'EOF'
[source.crates-io]
registry = "https://github.com/rust-lang/crates.io-index"
replace-with = 'mirror'

[source.mirror]
registry = "https://mirrors.ustc.edu.cn/crates.io-index"
EOF
```

### ç¾Žå›½æœåŠ¡å™¨ç½‘ç»œé…ç½®
**ç›´è¿žé…ç½®** (æ— éœ€ä»£ç†):
```bash
# ä½¿ç”¨é»˜è®¤å®˜æ–¹æº
unset PUB_HOSTED_URL
unset FLUTTER_STORAGE_BASE_URL

# Rustä½¿ç”¨å®˜æ–¹æº
rm ~/.cargo/config.toml  # ç§»é™¤é•œåƒé…ç½®
```

**ä¼˜åŠ¿**: 
- âœ… ç½‘ç»œé€Ÿåº¦å¿«ï¼Œæ— éœ€ä»£ç†
- âœ… åŒ…ç‰ˆæœ¬æœ€æ–°ï¼Œå…¼å®¹æ€§å¥½
- âœ… è¿žæŽ¥ç¨³å®šï¼Œå°‘è§è¶…æ—¶é—®é¢˜

---

## ðŸ”§ ä¾èµ–é—®é¢˜è§£å†³æ–¹æ¡ˆ

### å¸¸è§ä¾èµ–é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. Flutterä¾èµ–å†²çª
**é—®é¢˜**: `version solving failed`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
flutter clean
rm -rf .dart_tool/
rm pubspec.lock
flutter pub get
```

#### 2. Gitä¾èµ–èŽ·å–å¤±è´¥
**é—®é¢˜**: `git clone failed` æˆ–ç½‘ç»œè¶…æ—¶
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨ä»£ç†
git config --global http.proxy http://proxy:port
git config --global https.proxy https://proxy:port

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨GitHubé•œåƒ
git config --global url."https://github.com.cnpmjs.org/".insteadOf "https://github.com/"

# è§£å†³æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨ä¸‹è½½
wget https://github.com/rustdesk-org/Dash-Chat-2/archive/main.zip
# æ‰‹åŠ¨è§£åŽ‹åˆ°.pub-cacheç›®å½•
```

#### 3. Rustä¾èµ–ç¼–è¯‘å¤±è´¥
**é—®é¢˜**: `failed to compile package`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
cargo clean
cargo update  # æ›´æ–°ä¾èµ–ç‰ˆæœ¬
cargo build --release --target aarch64-linux-android -v  # è¯¦ç»†è¾“å‡º
```

#### 4. NDKå·¥å…·é“¾é—®é¢˜
**é—®é¢˜**: `linker not found` æˆ– `cc failed`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
export NDK_HOME=$ANDROID_HOME/ndk/25.1.8937393
export PATH=$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/bin:$PATH

# éªŒè¯å·¥å…·é“¾
$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang --version
```

---

## ðŸ“Š ä¾èµ–åŒ…å¤§å°å’Œä¸‹è½½æ—¶é—´é¢„ä¼°

### Flutterä¾èµ–åŒ…
| åŒ…ç±»åž‹ | æ•°é‡ | é¢„ä¼°å¤§å° | ä¸‹è½½æ—¶é—´ |
|--------|------|----------|----------|
| æ ¸å¿ƒSDKåŒ… | 2 | ~50MB | 1-2åˆ†é’Ÿ |
| ç¬¬ä¸‰æ–¹åŒ… | 25 | ~100MB | 3-5åˆ†é’Ÿ |
| Gitä¾èµ–åŒ… | 10 | ~200MB | 5-10åˆ†é’Ÿ |
| **æ€»è®¡** | **37** | **~350MB** | **10-15åˆ†é’Ÿ** |

### Rustä¾èµ–åŒ…
| åŒ…ç±»åž‹ | é¢„ä¼°å¤§å° | ä¸‹è½½æ—¶é—´ |
|--------|----------|----------|
| æ ¸å¿ƒcrate | ~100MB | 2-3åˆ†é’Ÿ |
| å¹³å°ç›¸å…³ | ~50MB | 1-2åˆ†é’Ÿ |
| **æ€»è®¡** | **~150MB** | **3-5åˆ†é’Ÿ** |

### æ€»è®¡ä¾èµ–
- **æ€»ä¸‹è½½é‡**: ~500MB
- **æ€»æ—¶é—´**: 15-20åˆ†é’Ÿ (ç½‘ç»œè‰¯å¥½æ—¶)
- **ç£ç›˜å ç”¨**: ~1.5GB (åŒ…å«ç¼–è¯‘ç¼“å­˜)

---

## ðŸš€ å¿«é€Ÿä¾èµ–é…ç½®è„šæœ¬

### è‡ªåŠ¨åŒ–ä¾èµ–å®‰è£…è„šæœ¬
```bash
#!/bin/bash
# æ–‡ä»¶å: setup_dependencies.sh

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "ðŸš€ å¼€å§‹é…ç½®RustDesk Androidé¡¹ç›®ä¾èµ–..."

# 1. æ£€æŸ¥çŽ¯å¢ƒ
echo "ðŸ“‹ æ£€æŸ¥åŸºç¡€çŽ¯å¢ƒ..."
java -version || { echo "âŒ Javaæœªå®‰è£…"; exit 1; }
flutter --version || { echo "âŒ Flutteræœªå®‰è£…"; exit 1; }
rustc --version || { echo "âŒ Rustæœªå®‰è£…"; exit 1; }

# 2. Flutterä¾èµ–
echo "ðŸ“¦ èŽ·å–Flutterä¾èµ–..."
cd flutter
flutter clean
flutter pub get
cd ..

# 3. Rustä¾èµ–
echo "ðŸ¦€ æž„å»ºRustä¾èµ–..."
cargo clean
cargo build --release --target aarch64-linux-android

# 4. éªŒè¯
echo "âœ… éªŒè¯ä¾èµ–å®Œæ•´æ€§..."
ls -la target/aarch64-linux-android/release/librustdesk.so
ls -la flutter/.dart_tool/

echo "ðŸŽ‰ ä¾èµ–é…ç½®å®Œæˆï¼å¯ä»¥å¼€å§‹æž„å»ºAPKäº†ã€‚"
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x setup_dependencies.sh
./setup_dependencies.sh
```

---

## ðŸ”„ ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬é”å®šç­–ç•¥
**Flutterä¾èµ–ç‰ˆæœ¬é”å®š**:
- ä½¿ç”¨`pubspec.lock`æ–‡ä»¶é”å®šç²¾ç¡®ç‰ˆæœ¬
- é‡è¦ä¾èµ–ä½¿ç”¨å›ºå®šç‰ˆæœ¬å·ï¼Œå¦‚`flutter_rust_bridge: "1.80.1"`

**Rustä¾èµ–ç‰ˆæœ¬é”å®š**:
- ä½¿ç”¨`Cargo.lock`æ–‡ä»¶é”å®šç‰ˆæœ¬
- å…³é”®crateä½¿ç”¨`=`ç²¾ç¡®ç‰ˆæœ¬æŒ‡å®š

### ç‰ˆæœ¬å‡çº§ç­–ç•¥
âš ï¸ **é‡è¦**: ä¸å»ºè®®éšæ„å‡çº§ä¾èµ–ç‰ˆæœ¬ï¼Œç‰¹åˆ«æ˜¯ä»¥ä¸‹å…³é”®ä¾èµ–ï¼š
- `flutter_rust_bridge`: å¿…é¡»ä¿æŒ1.80.1
- `ffi`: å½±å“åº•å±‚è°ƒç”¨
- Gitä¾èµ–åŒ…çš„commit hash: å·²ç»è¿‡éªŒè¯çš„ç¨³å®šç‰ˆæœ¬

### ä¾èµ–å…¼å®¹æ€§çŸ©é˜µ
| Flutterç‰ˆæœ¬ | flutter_rust_bridge | ffiç‰ˆæœ¬ | çŠ¶æ€ |
|-------------|---------------------|---------|------|
| 3.24.5 | 1.80.1 | ^2.1.0 | âœ… å·²éªŒè¯ |
| 3.24.x | 1.80.1 | ^2.1.0 | âœ… å…¼å®¹ |
| 3.22.x | 1.80.1 | ^2.1.0 | âš ï¸ æœªæµ‹è¯• |

---

## ðŸ“ž ä¾èµ–æ”¯æŒå’Œæ•…éšœæŽ’é™¤

### èŽ·å–å¸®åŠ©çš„æ¸ é“
1. **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹æœ¬æŒ‡å—å’ŒæŽ¥æ‰‹æŒ‡å—
2. **æ—¥å¿—åˆ†æž**: ä»”ç»†é˜…è¯»é”™è¯¯æ—¥å¿—
3. **å®˜æ–¹æ–‡æ¡£**: Flutterã€Rustå®˜æ–¹æ–‡æ¡£
4. **ç¤¾åŒºæ”¯æŒ**: GitHub Issuesã€Stack Overflow

### ä¾èµ–é—®é¢˜è¯Šæ–­æ¸…å•
é‡åˆ°ä¾èµ–é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥ï¼š

- [ ] ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
- [ ] çŽ¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
- [ ] ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ (è‡³å°‘5GB)
- [ ] æƒé™æ˜¯å¦æ­£ç¡® (æ‰€æœ‰ç›®å½•å¯è¯»å†™)
- [ ] ç‰ˆæœ¬æ˜¯å¦åŒ¹é… (Java 17, Flutter 3.24.5ç­‰)
- [ ] ç¼“å­˜æ˜¯å¦æŸå (å°è¯•æ¸…ç†ç¼“å­˜)
- [ ] ä»£ç†è®¾ç½®æ˜¯å¦æ­£ç¡® (å¦‚æžœä½¿ç”¨ä»£ç†)

### ç´§æ€¥æ¢å¤æ–¹æ¡ˆ
å¦‚æžœä¾èµ–å®Œå…¨æŸåï¼š
1. **ä½¿ç”¨é¡¹ç›®åŽ‹ç¼©åŒ…**: è§£åŽ‹å®Œæ•´é¡¹ç›®åŒ…ï¼Œè·³è¿‡ä¾èµ–ä¸‹è½½
2. **é‡æ–°å®‰è£…çŽ¯å¢ƒ**: æŒ‰ç…§å®Œæ•´æŒ‡å—é‡æ–°é…ç½®
3. **åˆ†æ­¥éª¤éªŒè¯**: æ¯ä¸ªçŽ¯èŠ‚éƒ½éªŒè¯æˆåŠŸåŽå†ç»§ç»­

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åŽæ›´æ–°**: 2024-09-14  
**ç»´æŠ¤è€…**: RustDeskå¼€å‘å›¢é˜Ÿ  
**é€‚ç”¨çŽ¯å¢ƒ**: LinuxæœåŠ¡å™¨ï¼Œç¾Žå›½ç½‘ç»œçŽ¯å¢ƒ# ä¾èµ–åŒ…å¤‡ä»½å’Œåˆ†å‘æŒ‡å—

## ðŸ“¦ ä¾èµ–åŒ…ç®¡ç†æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜ŽRustDesk Androidé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–åŒ…ç®¡ç†æ–¹æ¡ˆï¼Œç¡®ä¿æ–°åŒäº‹èƒ½å¤Ÿå¿«é€ŸèŽ·å–å’Œé…ç½®æ‰€æœ‰å¿…è¦çš„ä¾èµ–é¡¹ã€‚

---

## ðŸŽ¯ ä¾èµ–åŒ…åˆ†å‘æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šå®Œæ•´é¡¹ç›®åŽ‹ç¼©åŒ… (æŽ¨èâ­â­â­â­â­)
**åŽ‹ç¼©åŒ…ä¿¡æ¯**:
- æ–‡ä»¶å: `myrd-project-20250914.tar.gz`
- å¤§å°: 26.8MB
- ä½ç½®: `/root/rustdesk/myrd-project-20250914.tar.gz`
- åŒ…å«å†…å®¹: å®Œæ•´æºç  + æ‰€æœ‰ä¾èµ– + ç¼–è¯‘äº§ç‰©

**ä½¿ç”¨æ–¹æ³•**:
```bash
# ä¸‹è½½å¹¶è§£åŽ‹é¡¹ç›®åŒ…
wget [é¡¹ç›®åŒ…ä¸‹è½½é“¾æŽ¥]
tar -xzf myrd-project-20250914.tar.gz
cd myrd

# ç›´æŽ¥è¿›å…¥æž„å»ºæµç¨‹ï¼Œæ— éœ€é‡æ–°ä¸‹è½½ä¾èµ–
flutter pub get  # å¿«é€Ÿå®Œæˆï¼Œå› ä¸ºä¾èµ–å·²ç¼“å­˜
cargo build --release --target aarch64-linux-android
```

**ä¼˜åŠ¿**:
- âœ… åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— ç½‘ç»œé—®é¢˜
- âœ… ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œæ— å…¼å®¹æ€§é—®é¢˜  
- âœ… è§£åŽ‹å³ç”¨ï¼Œå¤§å¤§å‡å°‘é…ç½®æ—¶é—´
- âœ… é€‚åˆç¦»çº¿çŽ¯å¢ƒæˆ–ç½‘ç»œå—é™çŽ¯å¢ƒ

### æ–¹æ¡ˆäºŒï¼šGitHubä»“åº“ + ä¾èµ–è‡ªåŠ¨èŽ·å–
**ä»“åº“ä¿¡æ¯**:
- åœ°å€: https://github.com/zhangxun86/myrd.git
- è´¦å·: zhangxun86
- è®¿é—®æ–¹å¼: å…¬å¼€ä»“åº“

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/zhangxun86/myrd.git
cd myrd

# æŒ‰ç…§æŒ‡å—å®‰è£…çŽ¯å¢ƒå’Œä¾èµ–
# è¯¦è§ã€Šæ–°åŒäº‹é¡¹ç›®æŽ¥æ‰‹å®Œæ•´æŒ‡å—.mdã€‹
```

**ä¼˜åŠ¿**:
- âœ… å§‹ç»ˆèŽ·å–æœ€æ–°ä»£ç ç‰ˆæœ¬
- âœ… æ”¯æŒç‰ˆæœ¬æŽ§åˆ¶å’Œåä½œå¼€å‘
- âœ… æ–‡ä»¶è¾ƒå°ï¼Œä¸‹è½½å¿«é€Ÿ

**åŠ£åŠ¿**:
- âŒ éœ€è¦é‡æ–°ä¸‹è½½æ‰€æœ‰ä¾èµ–åŒ…
- âŒ å¯èƒ½é‡åˆ°ç½‘ç»œæˆ–ç‰ˆæœ¬å…¼å®¹é—®é¢˜

---

## ðŸ“‹ ä¾èµ–åŒ…è¯¦ç»†æ¸…å•

### Flutterä¾èµ–åŒ… (37ä¸ª)
**æ ¸å¿ƒæ¡†æž¶ä¾èµ–**:
```yaml
flutter: sdk
flutter_localizations: sdk
flutter_rust_bridge: "1.80.1"
ffi: ^2.1.0
```

**UIå’ŒåŠŸèƒ½ä¾èµ–**:
```yaml
provider: ^6.0.5
tuple: ^2.0.0
wakelock_plus: ^1.1.3
package_info_plus: ^4.2.0
url_launcher: ^6.3.1
toggle_switch: ^2.1.0
settings_ui: ^2.0.2
flutter_breadcrumb: ^1.0.1
http: ^1.1.0
image_picker: ^1.1.2
image: ^4.0.17
back_button_interceptor: ^6.0.1
```

**ç‰¹æ®ŠGitä¾èµ– (å…³é”®ï¼)**:
```yaml
dash_chat_2:
  git:
    url: https://github.com/rustdesk-org/Dash-Chat-2

window_manager:
  git:
    url: https://github.com/rustdesk-org/window_manager

desktop_multi_window:
  git:
    url: https://github.com/rustdesk-org/rustdesk_desktop_multi_window

uni_links:
  git:
    url: https://github.com/rustdesk-org/uni_links
    path: uni_links
    ref: f416118d843a7e9ed117c7bb7bdc2deda5a9e86f

texture_rgba_renderer:
  git:
    url: https://github.com/rustdesk-org/flutter_texture_rgba_renderer
    ref: 42797e0f03141dc2b585f76c64a13974508058b4

flutter_gpu_texture_renderer:
  git:
    url: https://github.com/rustdesk-org/flutter_gpu_texture_renderer
    ref: 08a471bb8ceccdd50483c81cdfa8b81b07b14b87

dynamic_layouts:
  git:
    url: https://github.com/rustdesk-org/dynamic_layouts.git
    ref: 24cb88413fa5181d949ddacbb30a65d5c459e7d9

window_size:
  git:
    url: https://github.com/google/flutter-desktop-embedding.git
    path: plugins/window_size
    ref: eb3964990cf19629c89ff8cb4a37640c7b3d5601
```

### Rustä¾èµ–åŒ… (Cargo.toml)
**æ ¸å¿ƒä¾èµ–**:
- `tokio` - å¼‚æ­¥è¿è¡Œæ—¶
- `serde` - åºåˆ—åŒ–/ååºåˆ—åŒ–
- `flutter_rust_bridge` - Flutteræ¡¥æŽ¥
- `uuid` - UUIDç”Ÿæˆ
- `anyhow` - é”™è¯¯å¤„ç†

**å¹³å°ç‰¹å®šä¾èµ–**:
- Android NDKç›¸å…³crate
- JNIæ¡¥æŽ¥åº“
- ç³»ç»Ÿè°ƒç”¨ç›¸å…³åº“

---

## ðŸŒ ç½‘ç»œé…ç½®å’Œé•œåƒæº

### ä¸­å›½å¤§é™†ç½‘ç»œä¼˜åŒ–é…ç½®
**Flutteré•œåƒæº**:
```bash
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
```

**Rusté•œåƒæºé…ç½®**:
```bash
mkdir -p ~/.cargo
cat > ~/.cargo/config.toml << 'EOF'
[source.crates-io]
registry = "https://github.com/rust-lang/crates.io-index"
replace-with = 'mirror'

[source.mirror]
registry = "https://mirrors.ustc.edu.cn/crates.io-index"
EOF
```

### ç¾Žå›½æœåŠ¡å™¨ç½‘ç»œé…ç½®
**ç›´è¿žé…ç½®** (æ— éœ€ä»£ç†):
```bash
# ä½¿ç”¨é»˜è®¤å®˜æ–¹æº
unset PUB_HOSTED_URL
unset FLUTTER_STORAGE_BASE_URL

# Rustä½¿ç”¨å®˜æ–¹æº
rm ~/.cargo/config.toml  # ç§»é™¤é•œåƒé…ç½®
```

**ä¼˜åŠ¿**: 
- âœ… ç½‘ç»œé€Ÿåº¦å¿«ï¼Œæ— éœ€ä»£ç†
- âœ… åŒ…ç‰ˆæœ¬æœ€æ–°ï¼Œå…¼å®¹æ€§å¥½
- âœ… è¿žæŽ¥ç¨³å®šï¼Œå°‘è§è¶…æ—¶é—®é¢˜

---

## ðŸ”§ ä¾èµ–é—®é¢˜è§£å†³æ–¹æ¡ˆ

### å¸¸è§ä¾èµ–é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. Flutterä¾èµ–å†²çª
**é—®é¢˜**: `version solving failed`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
flutter clean
rm -rf .dart_tool/
rm pubspec.lock
flutter pub get
```

#### 2. Gitä¾èµ–èŽ·å–å¤±è´¥
**é—®é¢˜**: `git clone failed` æˆ–ç½‘ç»œè¶…æ—¶
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨ä»£ç†
git config --global http.proxy http://proxy:port
git config --global https.proxy https://proxy:port

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨GitHubé•œåƒ
git config --global url."https://github.com.cnpmjs.org/".insteadOf "https://github.com/"

# è§£å†³æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨ä¸‹è½½
wget https://github.com/rustdesk-org/Dash-Chat-2/archive/main.zip
# æ‰‹åŠ¨è§£åŽ‹åˆ°.pub-cacheç›®å½•
```

#### 3. Rustä¾èµ–ç¼–è¯‘å¤±è´¥
**é—®é¢˜**: `failed to compile package`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
cargo clean
cargo update  # æ›´æ–°ä¾èµ–ç‰ˆæœ¬
cargo build --release --target aarch64-linux-android -v  # è¯¦ç»†è¾“å‡º
```

#### 4. NDKå·¥å…·é“¾é—®é¢˜
**é—®é¢˜**: `linker not found` æˆ– `cc failed`
```bash
# è§£å†³æ–¹æ¡ˆï¼š
export NDK_HOME=$ANDROID_HOME/ndk/25.1.8937393
export PATH=$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/bin:$PATH

# éªŒè¯å·¥å…·é“¾
$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android33-clang --version
```

---

## ðŸ“Š ä¾èµ–åŒ…å¤§å°å’Œä¸‹è½½æ—¶é—´é¢„ä¼°

### Flutterä¾èµ–åŒ…
| åŒ…ç±»åž‹ | æ•°é‡ | é¢„ä¼°å¤§å° | ä¸‹è½½æ—¶é—´ |
|--------|------|----------|----------|
| æ ¸å¿ƒSDKåŒ… | 2 | ~50MB | 1-2åˆ†é’Ÿ |
| ç¬¬ä¸‰æ–¹åŒ… | 25 | ~100MB | 3-5åˆ†é’Ÿ |
| Gitä¾èµ–åŒ… | 10 | ~200MB | 5-10åˆ†é’Ÿ |
| **æ€»è®¡** | **37** | **~350MB** | **10-15åˆ†é’Ÿ** |

### Rustä¾èµ–åŒ…
| åŒ…ç±»åž‹ | é¢„ä¼°å¤§å° | ä¸‹è½½æ—¶é—´ |
|--------|----------|----------|
| æ ¸å¿ƒcrate | ~100MB | 2-3åˆ†é’Ÿ |
| å¹³å°ç›¸å…³ | ~50MB | 1-2åˆ†é’Ÿ |
| **æ€»è®¡** | **~150MB** | **3-5åˆ†é’Ÿ** |

### æ€»è®¡ä¾èµ–
- **æ€»ä¸‹è½½é‡**: ~500MB
- **æ€»æ—¶é—´**: 15-20åˆ†é’Ÿ (ç½‘ç»œè‰¯å¥½æ—¶)
- **ç£ç›˜å ç”¨**: ~1.5GB (åŒ…å«ç¼–è¯‘ç¼“å­˜)

---

## ðŸš€ å¿«é€Ÿä¾èµ–é…ç½®è„šæœ¬

### è‡ªåŠ¨åŒ–ä¾èµ–å®‰è£…è„šæœ¬
```bash
#!/bin/bash
# æ–‡ä»¶å: setup_dependencies.sh

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "ðŸš€ å¼€å§‹é…ç½®RustDesk Androidé¡¹ç›®ä¾èµ–..."

# 1. æ£€æŸ¥çŽ¯å¢ƒ
echo "ðŸ“‹ æ£€æŸ¥åŸºç¡€çŽ¯å¢ƒ..."
java -version || { echo "âŒ Javaæœªå®‰è£…"; exit 1; }
flutter --version || { echo "âŒ Flutteræœªå®‰è£…"; exit 1; }
rustc --version || { echo "âŒ Rustæœªå®‰è£…"; exit 1; }

# 2. Flutterä¾èµ–
echo "ðŸ“¦ èŽ·å–Flutterä¾èµ–..."
cd flutter
flutter clean
flutter pub get
cd ..

# 3. Rustä¾èµ–
echo "ðŸ¦€ æž„å»ºRustä¾èµ–..."
cargo clean
cargo build --release --target aarch64-linux-android

# 4. éªŒè¯
echo "âœ… éªŒè¯ä¾èµ–å®Œæ•´æ€§..."
ls -la target/aarch64-linux-android/release/librustdesk.so
ls -la flutter/.dart_tool/

echo "ðŸŽ‰ ä¾èµ–é…ç½®å®Œæˆï¼å¯ä»¥å¼€å§‹æž„å»ºAPKäº†ã€‚"
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x setup_dependencies.sh
./setup_dependencies.sh
```

---

## ðŸ”„ ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬é”å®šç­–ç•¥
**Flutterä¾èµ–ç‰ˆæœ¬é”å®š**:
- ä½¿ç”¨`pubspec.lock`æ–‡ä»¶é”å®šç²¾ç¡®ç‰ˆæœ¬
- é‡è¦ä¾èµ–ä½¿ç”¨å›ºå®šç‰ˆæœ¬å·ï¼Œå¦‚`flutter_rust_bridge: "1.80.1"`

**Rustä¾èµ–ç‰ˆæœ¬é”å®š**:
- ä½¿ç”¨`Cargo.lock`æ–‡ä»¶é”å®šç‰ˆæœ¬
- å…³é”®crateä½¿ç”¨`=`ç²¾ç¡®ç‰ˆæœ¬æŒ‡å®š

### ç‰ˆæœ¬å‡çº§ç­–ç•¥
âš ï¸ **é‡è¦**: ä¸å»ºè®®éšæ„å‡çº§ä¾èµ–ç‰ˆæœ¬ï¼Œç‰¹åˆ«æ˜¯ä»¥ä¸‹å…³é”®ä¾èµ–ï¼š
- `flutter_rust_bridge`: å¿…é¡»ä¿æŒ1.80.1
- `ffi`: å½±å“åº•å±‚è°ƒç”¨
- Gitä¾èµ–åŒ…çš„commit hash: å·²ç»è¿‡éªŒè¯çš„ç¨³å®šç‰ˆæœ¬

### ä¾èµ–å…¼å®¹æ€§çŸ©é˜µ
| Flutterç‰ˆæœ¬ | flutter_rust_bridge | ffiç‰ˆæœ¬ | çŠ¶æ€ |
|-------------|---------------------|---------|------|
| 3.24.5 | 1.80.1 | ^2.1.0 | âœ… å·²éªŒè¯ |
| 3.24.x | 1.80.1 | ^2.1.0 | âœ… å…¼å®¹ |
| 3.22.x | 1.80.1 | ^2.1.0 | âš ï¸ æœªæµ‹è¯• |

---

## ðŸ“ž ä¾èµ–æ”¯æŒå’Œæ•…éšœæŽ’é™¤

### èŽ·å–å¸®åŠ©çš„æ¸ é“
1. **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹æœ¬æŒ‡å—å’ŒæŽ¥æ‰‹æŒ‡å—
2. **æ—¥å¿—åˆ†æž**: ä»”ç»†é˜…è¯»é”™è¯¯æ—¥å¿—
3. **å®˜æ–¹æ–‡æ¡£**: Flutterã€Rustå®˜æ–¹æ–‡æ¡£
4. **ç¤¾åŒºæ”¯æŒ**: GitHub Issuesã€Stack Overflow

### ä¾èµ–é—®é¢˜è¯Šæ–­æ¸…å•
é‡åˆ°ä¾èµ–é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥ï¼š

- [ ] ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
- [ ] çŽ¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
- [ ] ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ (è‡³å°‘5GB)
- [ ] æƒé™æ˜¯å¦æ­£ç¡® (æ‰€æœ‰ç›®å½•å¯è¯»å†™)
- [ ] ç‰ˆæœ¬æ˜¯å¦åŒ¹é… (Java 17, Flutter 3.24.5ç­‰)
- [ ] ç¼“å­˜æ˜¯å¦æŸå (å°è¯•æ¸…ç†ç¼“å­˜)
- [ ] ä»£ç†è®¾ç½®æ˜¯å¦æ­£ç¡® (å¦‚æžœä½¿ç”¨ä»£ç†)

### ç´§æ€¥æ¢å¤æ–¹æ¡ˆ
å¦‚æžœä¾èµ–å®Œå…¨æŸåï¼š
1. **ä½¿ç”¨é¡¹ç›®åŽ‹ç¼©åŒ…**: è§£åŽ‹å®Œæ•´é¡¹ç›®åŒ…ï¼Œè·³è¿‡ä¾èµ–ä¸‹è½½
2. **é‡æ–°å®‰è£…çŽ¯å¢ƒ**: æŒ‰ç…§å®Œæ•´æŒ‡å—é‡æ–°é…ç½®
3. **åˆ†æ­¥éª¤éªŒè¯**: æ¯ä¸ªçŽ¯èŠ‚éƒ½éªŒè¯æˆåŠŸåŽå†ç»§ç»­

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åŽæ›´æ–°**: 2024-09-14  
**ç»´æŠ¤è€…**: RustDeskå¼€å‘å›¢é˜Ÿ  
**é€‚ç”¨çŽ¯å¢ƒ**: LinuxæœåŠ¡å™¨ï¼Œç¾Žå›½ç½‘ç»œçŽ¯å¢ƒ